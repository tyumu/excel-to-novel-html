# ⚙️ 設定ガイド - ドクターの名前と分岐選択

## 🎭 ドクターの名前を設定する

### 方法1: config.pyを編集（推奨）

`config.py` を開いて、以下の行を編集:

```python
DOCTOR_NAME = "ドクター"  # ← ここを好きな名前に変更
```

設定後、`python simple_converter.py` を実行すると、全ての `{@nickname}` が指定した名前に置き換わります。

### 方法2: 実行時に確認

スクリプト実行時に表示されます:
```
検出した分岐数: 15
ドクターの名前: ドクター  ← 現在の設定
分岐モード: include_all
```

## 🔀 分岐システムについて

### 分岐の種類

Excelデータには**15個の分岐**があります:

```
【ドクターの選択肢】
  選択肢1: 君たちは、誰だ……？
  選択肢2: 黙っている
  選択肢3: 信じてみよう

【分岐: >Options_1】
選択肢1を選んだ場合のストーリー

【分岐: >Options_2】
選択肢2を選んだ場合のストーリー
```

### 現在の設定（推奨）

**`BRANCH_MODE = "include_all"`**
- **全ての分岐ルートを小説に含める**
- プレイヤーの視点で「もし別の選択をしていたら?」を楽しめる
- AIが自然に繋げて小説化

### 変更する場合

`config.py` を編集:

```python
BRANCH_MODE = "select_one"  # 特定の分岐のみ選択
```

ただし、現状では `"include_all"` の方が自然な小説になります。

## 📋 選択肢の表示設定

### 現在の設定

```python
BRANCH_DISPLAY = {
    "show_options": True,          # 選択肢を表示
    "options_format": "inline",    # 地の文に組み込む
}
```

### オプション

```python
# 選択肢を非表示にする
"show_options": False

# 選択肢を独立ページとして表示
"options_format": "separate_page"
```

## 🎯 AI変換時の推奨方法

### 選択肢の扱い

AIには以下のように指示されています:

```
【ドクターの選択肢】
  選択肢1: 質問する
  選択肢2: 黙っている

↓ AIが変換

ドクターは迷った末、口を開いた。
「君たちは、誰なんだ?」

【分岐: >Options_1】

（または別の選択肢なら）
ドクターは黙って頷くだけにした。

【分岐: >Options_2】
```

## 📊 検出される分岐の例

### 簡単な分岐
```
【ドクターの選択肢】
  選択肢1: 彼女はなぜ、アーミヤを恐れていたんだ？

【分岐: >Options_1】
```

### 複数選択肢
```
【ドクターの選択肢】
  選択肢1: 本当に信じていいのか？
  選択肢2: ……（黙っている）
  選択肢3: そうか……初めまして、アーミヤ。

【分岐: >Options_1】
（選択肢1のルート）

【分岐: >Options_2】
（選択肢2のルート）

【分岐: >Options_3】
（選択肢3のルート）
```

### 複合分岐
```
【分岐: >Options_1&2&3】
（どの選択肢でも共通のストーリー）
```

## 🚀 実際の使い方

### ステップ1: 設定を確認・変更

```python
# config.py
DOCTOR_NAME = "あなたの好きな名前"
BRANCH_MODE = "include_all"  # そのまま推奨
```

### ステップ2: データを抽出

```bash
python simple_converter.py
```

実行結果で確認:
```
検出した分岐数: 15
ドクターの名前: あなたの好きな名前  ← 変更が反映されているか確認
```

### ステップ3: AIで変換

`ai_prompt.txt` には分岐の扱い方が含まれているので、そのまま使用してください。

### ステップ4: HTML生成

```bash
python simple_converter.py
```

## 💡 Tips

### ドクターの名前を途中で変えたい場合

1. `config.py` の `DOCTOR_NAME` を変更
2. `python simple_converter.py` を再実行
3. 新しい `output/ai_input.txt` が生成される
4. AIで再変換

### 分岐を楽しむ読み方

全分岐モード（`include_all`）では:
- 各選択肢のルートが全て含まれる
- 「もしこうしていたら…」が読める
- より深いストーリー理解が可能

### 設定ファイルがない場合

`config.py` がなくても動作します:
- デフォルト: `DOCTOR_NAME = "ドクター"`
- デフォルト: `BRANCH_MODE = "include_all"`

## ⚠️ 注意事項

1. **ドクター名の長さ**: あまり長すぎると読みづらい
   - 推奨: 2-5文字程度

2. **特殊文字**: 使用可能ですが、HTMLで問題ないか確認
   - OK: ひらがな、カタカナ、漢字、アルファベット
   - 注意: 記号（`<>"`など）

3. **分岐数**: 現在15個検出
   - 多いので、AIの文字数制限に注意
   - 必要に応じてシートごとに分割処理

## 🎉 例

### 設定例1: シンプル
```python
DOCTOR_NAME = "ドクター"
BRANCH_MODE = "include_all"
```

### 設定例2: カスタム名前
```python
DOCTOR_NAME = "アルト"
BRANCH_MODE = "include_all"
```

### 設定例3: 一本道
```python
DOCTOR_NAME = "先生"
BRANCH_MODE = "select_one"
BRANCH_CHOICES = {"default": 1}  # 常に選択肢1
```

---

設定を変更したら、必ず `python simple_converter.py` を再実行してください!
